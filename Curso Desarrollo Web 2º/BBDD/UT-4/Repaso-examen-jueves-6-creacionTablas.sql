CREATE DATABASE CLUBFUTBOL;
USE CLUBFUTBOL;

CREATE TABLE EQUIPO (
	ID_EQUIPO INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR (45) NOT NULL,
    NOMBRE_PRESIDENTE VARCHAR (45) NOT NULL,
    FECHA_FUNDACION VARCHAR (45) NOT NULL,
    NUM_JUGADORES INT NOT NULL,
    CONSTRAINT PK_EQUIPO PRIMARY KEY (ID_EQUIPO)
);

CREATE TABLE ENTRENADOR (
	ID_ENTRENADOR INT NOT NULL,
    NOMBRE VARCHAR (45) NOT NULL,
    APELLIDO VARCHAR (45) NOT NULL,
    EDAD INT NOT NULL,
    LOCALIDAD VARCHAR (45) NOT NULL,
    ID_EQUIPO INT NOT NULL,
    CONSTRAINT PK_ENTRENADOR PRIMARY KEY (ID_ENTRENADOR),
    CONSTRAINT FK_ENTRENADOR_EQUIPO FOREIGN KEY (ID_EQUIPO) REFERENCES EQUIPO (ID_EQUIPO)
);

CREATE TABLE JUGADOR (
	ID_JUGADOR INT NOT NULL,
    NOMBRE VARCHAR(45) NOT NULL,
    POSICION VARCHAR (45) NOT NULL,
    SEXO VARCHAR (45) NOT NULL,
    SALARIO DECIMAL (10,2) NOT NULL,
    FECHA_NACIMIENTO DATE NOT NULL,
    ID_EQUIPO INT NOT NULL,
    CONSTRAINT PK_JUGADOR PRIMARY KEY (ID_JUGADOR),
    CONSTRAINT FK_EQUIPO_JUGADOR FOREIGN KEY (ID_EQUIPO) REFERENCES EQUIPO (ID_EQUIPO)
);

CREATE TABLE ENTRANDOR_JUGADOR (
	ID_JUGADOR INT NOT NULL,
    ID_ENTRENADOR INT NOT NULL,
    CONSTRAINT FK_ENTRENADOR_JUGADOR_JUGADOR FOREIGN KEY (ID_JUGADOR) REFERENCES JUGADOR (ID_JUGADOR),
    CONSTRAINT FK_ENTRENADOR_JUGADOR_ENTRENADOR FOREIGN KEY (ID_ENTRENADOR) REFERENCES ENTRENADOR (ID_ENTRENADOR)
);
DROP DATABASE clubfutbol;

INSERT INTO EQUIPO (NOMBRE, NOMBRE_PRESIDENTE, FECHA_FUNDACION, NUM_JUGADORES)
	VALUES ('Real Madrid', 'Sergio', '23/05/2002', 25),
			('Sevilla', 'Miguel', '24/02/2000', 22),
            ('Betis', 'Ismael', '02/01/1998', 23),
            ('Barcelona', 'Carlos', '15/05/2005', 22),
            ('Girona', 'Javier', '15/05/2000', 26),
            ('Equipo Paro', 'Daniel', '12/06/1999', 22);
select * from equipo;

INSERT INTO ENTRENADOR (ID_ENTRENADOR, NOMBRE, APELLIDO, EDAD, LOCALIDAD, ID_EQUIPO)
	VALUES (111, 'Carlo', 'Ancelotti,', 60, 'Madrid', 1),
			(222, 'Xavi', 'Hernández,', 45, 'Barcelona', 4),
			(333, 'Manuel', 'Pellegrini,', 30, 'Granada', 3),
			(444, 'Quique', 'Bravo', 50, 'Galicia', 2),
			(555, 'Míchel.', 'Mora', 40, 'Ciudad Real', 5);
select * from entrenador;

INSERT INTO JUGADOR  (ID_JUGADOR, NOMBRE, POSICION, SEXO, SALARIO, FECHA_NACIMIENTO, ID_EQUIPO)
	VALUES (001, 'Vinicius', 'Delantero', 'Hombre', 3500.50, '2002-12-02', 1),
			(002, 'Luka', 'Portero', 'Hombre', 3500.50, '2005-03-02', 1),
            (003, 'Ayoze', 'Defensa', 'Hombre', 3500.50, '1999-03-06', 3),
			(004, 'Ferran', 'Medio', 'Hombre', 3500.50, '2000-03-01', 4);
select * from jugador;

INSERT INTO ENTRANDOR_JUGADOR (ID_JUGADOR , ID_ENTRENADOR)
	VALUES (001, 111),
			(002 , 111),
			(003 , 333),
			(004 , 222);
select * from ENTRANDOR_JUGADOR;

CREATE TABLE ESTADIO (
	ID_ESTADIO INT NOT NULL AUTO_INCREMENT,
    NOMBRE VARCHAR (25) NOT NULL,
    AFORO INT NOT NULL,
    CONSTRAINT PK_ESTADIO PRIMARY KEY (ID_ESTADIO)
);

ALTER TABLE EQUIPO
	ADD COLUMN NUM_ENTRENADORES INT NOT NULL,
    ADD COLUMN VICEPRESIDENTE VARCHAR (14) NOT NULL,
    ADD COLUMN ID_ESTADIO INT NULL,
    ADD  CONSTRAINT FK_ESTADIO_EQUIPO FOREIGN KEY (ID_ESTADIO) REFERENCES ESTADIO (ID_ESTADIO);

ALTER TABLE JUGADOR
	MODIFY COLUMN FECHA_NACIMIENTO  DATE NOT NULL;

ALTER TABLE ENTRENADOR
	ADD COLUMN PAIS VARCHAR(25);
    
    
UPDATE ENTRENADOR
SET ID_EQUIPO = 6
WHERE ID_ENTRENADOR = 1;

INSERT INTO ENTRENADOR (ID_ENTRENADOR, NOMBRE, APELLIDO, EDAD, LOCALIDAD, ID_EQUIPO)
	VALUES (666, 'Luis', 'Garcia', 30, 'Valencia', 1);
select * from entrenador;

INSERT INTO JUGADOR (ID_JUGADOR, NOMBRE, POSICION, SEXO, SALARIO, FECHA_NACIMIENTO, ID_EQUIPO)
	VALUES (005, 'Pepe', 'reina', 'Hombre', 3500.50, '2002-10-02', 1);
select * from jugador;
    



